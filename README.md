# 🎴 德州扑克概率计算器 & AI 决策助手

一个功能强大的德州扑克概率计算和 AI 决策分析工具，使用 Python + Streamlit 开发，集成 DeepSeek AI 提供专业的决策建议。

## ✨ 功能特点

### 📊 概率计算
- **蒙特卡洛模拟**: 精确计算赢牌/平局/输牌概率
- **多对手支持**: 可设置 1-9 个对手
- **实时计算**: 支持翻牌前、翻牌圈、转牌圈、河牌圈各阶段
- **底池赔率分析**: 自动计算底池赔率并给出是否有利可图的建议

### 🎯 Outs 分析
- **计算 Out 牌**: 自动识别能改进手牌的所有牌
- **改进概率**: 计算下一张牌的改进概率
- **Rule of 4/2**: 快速估算到河牌的改进概率

### 🤖 AI 决策建议 (DeepSeek)
- **专业分析**: 基于 GTO (游戏理论最优策略) 给出决策
- **考虑因素全面**:
  - 手牌强度
  - 位置优势
  - 底池赔率和隐含赔率
  - 对手可能的范围
- **清晰建议**: 给出 Fold/Call/Raise/All-in 的明确建议
- **风险提示**: 标注需要注意的风险点

### 🎨 美观界面
- 直观的卡牌选择器
- 实时显示牌面和手牌类型
- 清晰的概率可视化
- 响应式布局

## 🚀 快速开始

### 1. 安装依赖

```bash
pip install -r requirements.txt
```

### 2. 配置 DeepSeek API (可选)

创建 `.env` 文件（或直接在应用界面输入）:

```bash
DEEPSEEK_API_KEY=your_api_key_here
```

获取 API Key: [https://platform.deepseek.com](https://platform.deepseek.com)

### 3. 运行应用

```bash
streamlit run app.py
```

应用将在浏览器中自动打开，默认地址: `http://localhost:8501`

## 📖 使用说明

### 基本使用流程

1. **输入手牌**: 在左侧选择你的2张手牌
2. **选择游戏阶段**: 选择翻牌前/翻牌圈/转牌圈/河牌圈
3. **输入公共牌**: 根据游戏阶段输入相应数量的公共牌
4. **配置参数**: 在侧边栏设置对手数量、模拟次数等
5. **计算分析**: 点击相应按钮进行计算

### 功能按钮说明

- **🎲 计算赢牌概率**: 使用蒙特卡洛模拟计算精确的赢牌概率
- **🤖 AI 决策建议**: 调用 DeepSeek AI 获取专业决策分析 (需要 API Key)
- **🎯 计算 Outs**: 分析能改进手牌的 out 牌数量和概率

### 侧边栏配置

#### API 配置
- **API Key**: 输入 DeepSeek API Key 以启用 AI 功能

#### 计算参数
- **对手数量**: 1-9 人，影响赢率计算
- **模拟次数**: 1000-100000 次，越多越准确但耗时越长

#### 筹码信息 (用于 AI 决策)
- **当前底池**: 当前底池的筹码数
- **需要跟注**: 轮到你时需要跟注的金额
- **你的筹码**: 你当前的筹码量
- **你的位置**: 早位/中位/晚位/盲注/庄位

## 🏗️ 项目结构

```
vibe code/
├── app.py                    # Streamlit 主应用
├── poker_calculator.py       # 扑克牌和概率计算核心模块
├── deepseek_advisor.py       # DeepSeek AI 集成模块
├── requirements.txt          # 项目依赖
├── .env.example             # 环境变量示例
└── README.md                # 项目说明
```

## 🔧 技术栈

- **Python 3.8+**: 编程语言
- **Streamlit**: Web 应用框架
- **DeepSeek API**: AI 决策分析
- **蒙特卡洛模拟**: 概率计算方法

## 📊 算法说明

### 蒙特卡洛模拟
通过大量随机模拟来估算概率:
1. 随机发剩余的公共牌
2. 为对手随机发手牌
3. 比较所有玩家的手牌强度
4. 统计胜负次数
5. 重复 N 次得到概率估计

### 手牌评估
支持所有德州扑克手牌类型:
- 皇家同花顺 (Royal Flush)
- 同花顺 (Straight Flush)
- 四条 (Four of a Kind)
- 葫芦 (Full House)
- 同花 (Flush)
- 顺子 (Straight)
- 三条 (Three of a Kind)
- 两对 (Two Pair)
- 一对 (One Pair)
- 高牌 (High Card)

## 💡 使用建议

1. **模拟次数选择**:
   - 快速估算: 1000-5000 次
   - 准确计算: 10000-50000 次
   - 精确分析: 50000-100000 次

2. **AI 建议使用**:
   - AI 建议基于概率和策略理论，但不是绝对正确
   - 应结合实际对手特点和游戏环境
   - 建议作为决策参考，而非盲目跟随

3. **底池赔率**:
   - 当赢率 > 底池赔率时，跟注/加注有利可图
   - 考虑隐含赔率（后续轮次可能赢得的筹码）

## ⚠️ 注意事项

- 本工具仅供学习和娱乐使用
- 实际游戏中还需考虑对手行为、心理因素等
- 请理性游戏，不要过度依赖概率计算
- DeepSeek API 需要付费使用，请注意费用

## 🔐 隐私和安全

- API Key 仅在本地使用，不会被上传
- 所有计算在本地完成
- 建议使用 `.env` 文件管理 API Key

## 📝 更新日志

### v1.0.0 (2026-01-22)
- ✅ 基础概率计算功能
- ✅ DeepSeek AI 集成
- ✅ Streamlit 界面
- ✅ Outs 分析
- ✅ 底池赔率分析

## 🤝 贡献

欢迎提交 Issue 和 Pull Request!

## 📄 许可证

MIT License

## 🙏 致谢

- [Streamlit](https://streamlit.io/) - 优秀的 Web 应用框架
- [DeepSeek](https://www.deepseek.com/) - 强大的 AI 模型
- 德州扑克社区的各位玩家和理论研究者
